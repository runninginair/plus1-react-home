{"ast":null,"code":"import _defineProperty from \"/Users/tylerzhang/2023/spring/frontend-plus1/plus1-home/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/tylerzhang/2023/spring/frontend-plus1/plus1-home/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _extraReducers;\nimport { createSlice } from \"@reduxjs/toolkit\";\n// import tuits from '../data/tuits.json';\nimport // import the thunks\n{ createActivityThunk, updateActivityThunk, findActivityThunk, deleteActivityThunk } from \"../../services/activities-thunks\";\nvar initialState = {\n  // initial state has no tuits \n  activities: [],\n  // no tuits\n  loading: false // loading flag to display spinner\n};\n\nvar tuitsSlice = createSlice({\n  name: 'activities',\n  initialState: initialState,\n  // same as \"initialState\": initialState\n  extraReducers: (_extraReducers = {}, _defineProperty(_extraReducers, findActivitiesThunk.pending,\n  // if request is not yet fulfilled …\n  function (state) {\n    state.loading = true; // set loading true so UI can display spinner\n    state.activities = []; // empty tuits since we are still fetching them\n  }), _defineProperty(_extraReducers, findActivitiesThunk.fulfilled,\n  // when we get response, request is fulfilled\n  function (state, _ref) {\n    var payload = _ref.payload;\n    // we extract/destruct payload from action object\n    state.loading = false; // turn off loading flag since we have the data\n    state.activities = payload; // payload has tuits from server and update redux state\n  }), _defineProperty(_extraReducers, findActivitiesThunk.rejected,\n  // if request times out, or responds with error\n  function (state, action) {\n    state.loading = false; // reset loading flag\n    state.error = action.error; // report error\n  }), _defineProperty(_extraReducers, deleteActivityThunk.fulfilled,\n  // handle successful response\n  function (state, _ref2) {\n    var payload = _ref2.payload;\n    // server response successful\n    state.loading = false; // payload from action contains tuit ID to remove\n    state.activities = state.activities // turn off loading flag\n    .filter(function (t) {\n      return t._id !== payload;\n    }); // filter out tuit whose ID matches tuit to remove\n  }), _defineProperty(_extraReducers, createActivityThunk.fulfilled,\n  // when server responds\n  function (state, _ref3) {\n    var payload = _ref3.payload;\n    // payload contains new tuit\n    state.loading = false; // clear loading flag\n    state.activities.push(payload); // append new tuit to tuits array\n  }), _defineProperty(_extraReducers, updateActivityThunk.fulfilled,\n  // when server update is done\n  function (state, _ref4) {\n    var payload = _ref4.payload;\n    // payload contains updated tuit\n    state.loading = false; // clear loading flag\n    var activityNdx = state.activities // find index of updated tuit in array\n    .findIndex(function (t) {\n      return t._id === payload._id;\n    });\n    state.activities[activityNdx] = _objectSpread({}, state.activities[activityNdx], payload);\n  }), _extraReducers),\n  reducers: {}\n});\nexport default tuitsSlice.reducer;","map":{"version":3,"names":["createSlice","createActivityThunk","updateActivityThunk","findActivityThunk","deleteActivityThunk","initialState","activities","loading","tuitsSlice","name","extraReducers","findActivitiesThunk","pending","state","fulfilled","payload","rejected","action","error","filter","t","_id","push","activityNdx","findIndex","reducers","reducer"],"sources":["/Users/tylerzhang/2023/spring/frontend-plus1/plus1-home/src/activity/activities/activities-reducer.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n// import tuits from '../data/tuits.json';\nimport { createActivityThunk, updateActivityThunk, findActivityThunk, deleteActivityThunk }       // import the thunks\n    from \"../../services/activities-thunks\";\n\n\nconst initialState = {          // initial state has no tuits \n    activities: [],                  // no tuits\n    loading: false              // loading flag to display spinner\n}\n\nconst tuitsSlice = createSlice({\n    name: 'activities',\n    initialState,               // same as \"initialState\": initialState\n    extraReducers: {            // define asynchronous reducers\n\n        [findActivitiesThunk.pending]:                       // if request is not yet fulfilled …\n            (state) => {\n                state.loading = true                    // set loading true so UI can display spinner\n                state.activities = []                        // empty tuits since we are still fetching them\n            },\n\n        [findActivitiesThunk.fulfilled]:                     // when we get response, request is fulfilled\n            (state, { payload }) => {                   // we extract/destruct payload from action object\n                state.loading = false                   // turn off loading flag since we have the data\n                state.activities = payload                   // payload has tuits from server and update redux state\n            },\n\n        [findActivitiesThunk.rejected]:                      // if request times out, or responds with error\n            (state, action) => {\n                state.loading = false                   // reset loading flag\n                state.error = action.error              // report error\n            },\n\n\n        [deleteActivityThunk.fulfilled]:                    // handle successful response\n            (state, { payload }) => {                   // server response successful\n                state.loading = false                   // payload from action contains tuit ID to remove\n                state.activities = state.activities               // turn off loading flag\n                    .filter(t => t._id !== payload)     // filter out tuit whose ID matches tuit to remove\n            },                                          // we're ignoring pending and rejected thunks\n\n\n        [createActivityThunk.fulfilled]:                    // when server responds\n            (state, { payload }) => {                   // payload contains new tuit\n                state.loading = false                   // clear loading flag\n                state.activities.push(payload)               // append new tuit to tuits array\n            },                                          // we're ignoring pending and rejected thunks\n\n        [updateActivityThunk.fulfilled]:                    // when server update is done\n            (state, { payload }) => {                   // payload contains updated tuit\n                state.loading = false                   // clear loading flag\n                const activityNdx = state.activities             // find index of updated tuit in array\n                    .findIndex((t) => t._id === payload._id)\n                state.activities[activityNdx] = {                // merge old tuit with updated tuit\n                    ...state.activities[activityNdx],\n                    ...payload\n                }\n            }\n\n    },\n    reducers: {}\n});\n\nexport default tuitsSlice.reducer;"],"mappings":";;;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C;AACA,OAAkG;AAAA,EAAzFC,mBAAmB,EAAEC,mBAAmB,EAAEC,iBAAiB,EAAEC,mBAAmB,QAChF,kCAAkC;AAG3C,IAAMC,YAAY,GAAG;EAAW;EAC5BC,UAAU,EAAE,EAAE;EAAmB;EACjCC,OAAO,EAAE,KAAK,CAAc;AAChC,CAAC;;AAED,IAAMC,UAAU,GAAGR,WAAW,CAAC;EAC3BS,IAAI,EAAE,YAAY;EAClBJ,YAAY,EAAZA,YAAY;EAAgB;EAC5BK,aAAa,wDAERC,mBAAmB,CAACC,OAAO;EAAyB;EACjD,UAACC,KAAK,EAAK;IACPA,KAAK,CAACN,OAAO,GAAG,IAAI,EAAoB;IACxCM,KAAK,CAACP,UAAU,GAAG,EAAE,EAAwB;EACjD,CAAC,mCAEJK,mBAAmB,CAACG,SAAS;EAAuB;EACjD,UAACD,KAAK,QAAkB;IAAA,IAAdE,OAAO,QAAPA,OAAO;IAA2B;IACxCF,KAAK,CAACN,OAAO,GAAG,KAAK,EAAmB;IACxCM,KAAK,CAACP,UAAU,GAAGS,OAAO,EAAmB;EACjD,CAAC,mCAEJJ,mBAAmB,CAACK,QAAQ;EAAwB;EACjD,UAACH,KAAK,EAAEI,MAAM,EAAK;IACfJ,KAAK,CAACN,OAAO,GAAG,KAAK,EAAmB;IACxCM,KAAK,CAACK,KAAK,GAAGD,MAAM,CAACC,KAAK,EAAc;EAC5C,CAAC,mCAGJd,mBAAmB,CAACU,SAAS;EAAsB;EAChD,UAACD,KAAK,SAAkB;IAAA,IAAdE,OAAO,SAAPA,OAAO;IAA2B;IACxCF,KAAK,CAACN,OAAO,GAAG,KAAK,EAAmB;IACxCM,KAAK,CAACP,UAAU,GAAGO,KAAK,CAACP,UAAU,CAAe;IAAA,CAC7Ca,MAAM,CAAC,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACC,GAAG,KAAKN,OAAO;IAAA,EAAC,EAAK;EAC5C,CAAC,mCAGJd,mBAAmB,CAACa,SAAS;EAAsB;EAChD,UAACD,KAAK,SAAkB;IAAA,IAAdE,OAAO,SAAPA,OAAO;IAA2B;IACxCF,KAAK,CAACN,OAAO,GAAG,KAAK,EAAmB;IACxCM,KAAK,CAACP,UAAU,CAACgB,IAAI,CAACP,OAAO,CAAC,EAAe;EACjD,CAAC,mCAEJb,mBAAmB,CAACY,SAAS;EAAsB;EAChD,UAACD,KAAK,SAAkB;IAAA,IAAdE,OAAO,SAAPA,OAAO;IAA2B;IACxCF,KAAK,CAACN,OAAO,GAAG,KAAK,EAAmB;IACxC,IAAMgB,WAAW,GAAGV,KAAK,CAACP,UAAU,CAAa;IAAA,CAC5CkB,SAAS,CAAC,UAACJ,CAAC;MAAA,OAAKA,CAAC,CAACC,GAAG,KAAKN,OAAO,CAACM,GAAG;IAAA,EAAC;IAC5CR,KAAK,CAACP,UAAU,CAACiB,WAAW,CAAC,qBACtBV,KAAK,CAACP,UAAU,CAACiB,WAAW,CAAC,EAC7BR,OAAO,CACb;EACL,CAAC,kBAER;EACDU,QAAQ,EAAE,CAAC;AACf,CAAC,CAAC;AAEF,eAAejB,UAAU,CAACkB,OAAO"},"metadata":{},"sourceType":"module"}